(()=>{"use strict";const e=({draw:e,duration:t=1e3,timingplane:s="linear"})=>{const n={linear:e=>e,easeOutCubic:e=>1-Math.pow(1-e,3),easeInOutCubic:e=>e<.5?4*e*e*e:1-Math.pow(-2*e+2,3)/2,easeOutQuart:e=>1-Math.pow(1-e,5),aseOutExpo:e=>1===e?1:1-Math.pow(2,-10*e)};s in n||(s="linear");let i=performance.now();requestAnimationFrame((function a(l){let o=(l-i)/t;o>1?o=1:o<0&&(o=0);let r=n[s](o);e(r),o<1&&requestAnimationFrame(a)}))};(e=>{const t=document.getElementById("timer-hours"),s=document.getElementById("timer-minutes"),n=document.getElementById("timer-seconds"),i=setInterval((()=>{let e=(()=>{let e=new Date("31 march 2022 01:15").getTime(),t=(new Date).getTime(),s=Math.max((e-t)/1e3,0);return{timeRemaining:s,hours:Math.floor(s/60/60),minutes:Math.floor(s/60%60),seconds:Math.floor(s%60)}})();t.textContent=e.hours<10?"0"+e.hours:e.hours,s.textContent=("0"+e.minutes).slice(-2),n.textContent=("0"+e.seconds).slice(-2),e.timeRemaining||clearInterval(i)}),1e3)})(),(()=>{const t=document.querySelector("menu"),s=document.querySelector("main header .menu"),n=document.querySelector("body .container").getBoundingClientRect().bottom+window.scrollY,i=(t,s)=>{t.preventDefault();const n=window.scrollY,i=document.querySelector(s).getBoundingClientRect().top;e({duration:1e3,timingplane:"easeOutCubic",draw(e){window.scrollTo(0,n+i*e)}})};document.querySelector("body").addEventListener("click",(e=>{let s,n=null;e.target.closest(".menu")||e.target.classList.contains("close-btn")||(n=e.target.closest("menu ul>li>a"))||!e.target.closest(".active-menu")&&t.classList.contains("active-menu")?t.classList.toggle("active-menu"):(s=e.target.closest("main a"))&&i(e,s.getAttribute("href")),n&&i(e,n.getAttribute("href"))})),window.addEventListener("scroll",(e=>{window.scrollY>n?(s.style.position="fixed",s.style.top="0",s.style.right="0",s.style.zIndex="1",s.style.opacity="0.5",s.style.backgroundColor="var(--dark)",s.style.maxWidth=Math.round(80/window.devicePixelRatio)+"px"):s.style&&(s.style="")}))})(),(()=>{const t=document.querySelector(".popup"),s=t.querySelector(".popup-content");document.querySelectorAll(".popup-btn").forEach((n=>{n.addEventListener("click",(n=>{t.style.display="block",window.innerWidth>767&&(()=>{const t=100-100*s.getBoundingClientRect().left/window.innerWidth;e({timingplane:"aseOutExpo",draw(e){s.style.opacity=`${e}`,s.style.left=100-e*t+"%",s.style.transform="translateX( 0px )"}}),s.style.left="",s.style.transform="",s.style.opacity=""})()}))})),t.addEventListener("click",(e=>{e.target.closest(".popup-content")&&!e.target.classList.contains("popup-close")||(t.style.display="none")}))})(),((t=100)=>{const s=document.querySelector(".calc-block"),n=s.querySelector(".calc-type"),i=s.querySelector(".calc-square"),a=s.querySelector(".calc-count"),l=s.querySelector(".calc-day"),o=document.getElementById("total"),r=([t,s])=>{e({duration:500,timingplane:"easeInOutCubic",draw(e){o.textContent=t+Math.round(e*(s-t))}})};s.debounce=function(e,t){return s=>{"lastCallTimer"in this&&clearTimeout(this.lastCallTimer),this.lastCallTimer=setTimeout((()=>e(s)),t)}},s.addEventListener("input",(e=>{e.target!==n&&e.target!==i&&e.target!==a&&e.target!==l||(e.target!==n&&(e.target.value=e.target.value.replace(/\D+/g,""),e.target.value=e.target.value.replace(/^0+/g,"")),(()=>{const e=+n.options[n.selectedIndex].value,c=+i.value;let u=0,d=1,m=1;+a.value>1&&(d+=+a.value/10),0==+l.value||(+l.value<5?m=2:+l.value<10&&(m=1.5)),u=Math.round(t*e*c*d*m),+o.textContent!==u&&s.debounce(r,300)([+o.textContent,u])})())}))})(100),(()=>{const e=document.querySelectorAll("form"),t={user_name:/[^а-яё\s]+/gi,user_email:/[^a-z\_\-\@\.\!\~\*\']+/gi,user_phone:/[^\d\-\+\(\)']+/gi,user_message:/[^а-яё\s\d\.\,\;\:\-\?\!\)\(\"]+/gi,rus:/[а-я]/gi,trimSH:/(^[\s\-]+|^)(.*?)(?:([\s\-]+$)|$)/i,multySH:/(\s{2,})|(\-{2,})/g,wordFirst:/((^|\s\-|\s|\-)[а-я])([а-я]*)/gi};e.forEach((e=>{e.addEventListener("input",(e=>{e.target.matches("input")&&e.target.name in t&&(e.target.value=e.target.value.replace(t[e.target.name],""))})),e.addEventListener("focusout",(e=>{if(e.target.matches("input")){let s=e.target.name,n=e.target.value;"user_name"===s?n=n.replace(t.wordFirst,((e,t,s,n)=>t.toUpperCase()+n.toLowerCase())):"user_email"===s&&(n=n.replace(t.rus,(e=>""))),n=n.replace(t.trimSH,((e,t,s)=>`${s}`)),n=n.replace(t.multySH,((e,t,s)=>(t?" ":"")+(s?"-":""))),e.target.value=n}}))}))})(),(()=>{const e=document.querySelector(".service-header"),t=document.querySelectorAll(".service-header-tab"),s=document.querySelectorAll(".service-tab");e.addEventListener("click",(e=>{if(e.target.closest(".service-header-tab")){const n=e.target.closest(".service-header-tab");t.forEach(((e,t)=>{e===n?(e.classList.add("active"),s[t].classList.remove("d-none")):(e.classList.remove("active"),s[t].classList.add("d-none"))}))}}))})(),((e,t=1500)=>{const s={slide:"slide-default",slideActive:"slide-active-default",switch:"switch-defult",switchActive:"switch-active-default",get switchOrButton(){return`.${this.switch}`+("button"in this?`, .${this.button}`:"")}};let n="";for(let t in e)s[t]=e[t];if("slider"in s||(n+="init:slider не указан \n"),n)return n;const i=document.querySelector(`.${s.slider}`);if(i?"UL"!==i.nodeName&&(n+=`тег <${i.nodeName.toLowerCase()}>не приемлем для инициализации слайдера, используйте тег <ul>\n`):n+=`тег инициализации слайдера <ul class="${s.slider}"></ul> не найден\n`,n)return n;const a=i.querySelectorAll("li");if(a.length?a.forEach((e=>{e.classList.contains(s.slide)||("slide-default"===s.slide?(e.classList.add(s.slide),e.style.opacity="0",e.style.position="absolute"):n+=`класс "${s.slide}" не объявлен для слайда <li class="${e.classList}">\n`)})):n+=`теги инициализации слайдов <li class="${s.slide}"></li> не найдены\n`,n)return n;const l=i.querySelector(`.${s.button}.${s.buttonPrev}`),o=i.querySelector(`.${s.button}.${s.buttonNext}`);t=t<=0?0:t<1e3?1e3:t;let r,c=0;const u=(()=>{const e=[],t=document.createElement("li");t.classList.add(s.switch),"switch-defult"===s.switch&&(t.style.display="inline-block",t.style.width="2rem",t.style.height="2rem",t.style.marginLeft="1rem",t.style.backgroundColor="white",t.style.cursor="pointer",t.style.borderRadius="50%"),"switch-active-default"===s.switchActive&&(t.style.outlineWidth="0.3rem",t.style.outlineStyle="solid",t.style.outlineColor="white");const n=document.createElement("ul");"switchList"in s&&n.classList.add(s.switchList);for(let s=0;s<a.length;s++)e.push(t.cloneNode()),n.append(e[s]);return e[0].classList.add(s.switchActive),i.append(n),e})(),d=e=>{a[e].classList.remove(s.slideActive),"slide-active-default"===s.slideActive&&(a[e].style.opacity="0"),u[e].classList.remove(s.switchActive),"switch-active-default"===s.switchActive&&(u[e].style.outlineColor="white")},m=e=>{a[e].classList.add(s.slideActive),"slide-active-default"===s.slideActive&&(a[e].style.opacity="1"),u[e].classList.add(s.switchActive),"switch-active-default"===s.switchActive&&(u[e].style.outlineColor="blue")},h=(e,t)=>{l&&(l.style.filter=e?"brightness(0.5)":""),o&&(o.style.filter=t?"brightness(0.5)":"")},g=()=>{d(c),c++,c>=a.length&&(c=0),h(0===c,c===a.length-1),m(c)},p=e=>{r=setInterval(g,e)};i.addEventListener("click",(e=>{e.target.matches(s.switchOrButton)&&(e.preventDefault(),d(c),e.target.classList.contains(s.buttonNext)?c++:e.target.classList.contains(s.buttonPrev)?c--:e.target.classList.contains(s.switch)&&u.forEach(((t,s)=>{e.target===t&&(c=s)})),c=Math.min(Math.max(c,0),a.length-1),h(0===c,c===a.length-1),m(c))})),i.addEventListener("mouseenter",(e=>{t&&e.target.matches(s.switchOrButton)&&clearInterval(r)}),!0),i.addEventListener("mouseleave",(e=>{t&&e.target.matches(s.switchOrButton)&&p(t)}),!0),t&&p(t)})({slider:"portfolio-content",slide:"portfolio-item",slideActive:"portfolio-item-active",button:"portfolio-btn",buttonPrev:"prev",buttonNext:"next",switchList:"portfolio-dots",switch:"dot",switchActive:"dot-active"},2e3),((e,t={})=>{const s=document.querySelectorAll("form"),n=document.querySelector(".preloader"),i={user_name:/..+/g,user_email:/.+/,user_phone:/(^\+\d|^\d)(([\d\-]+[\(]\d+[\)][\d\-]+$)|([\d\-]+$))/,user_message:/.+/,noNumber:/[^\d]+/g},a="Технический сбой. Заявка&nbsp;не&nbsp;отправлена",l="Спасибо! Наш менеджер с Вами свяжется",o="Ошибочные данные. Заявка&nbsp;не&nbsp;отправлена.";s.forEach((s=>{const r=document.createElement("div");r.classList.add("status-block"),r.style.color="white",s.append(r),s.addEventListener("submit",(s=>{s.preventDefault();const r={form:s.currentTarget};s.target.id in t&&(r.optional=t[s.target.id]),(({form:t,optional:s=[]})=>{const r=t.querySelector(".status-block"),c=t.querySelectorAll("input"),u=new FormData(t),d={};var m;(e=>{let t=!0;return e.forEach((e=>{let s=!0;if(e.name){if(e.name in i)if(i[e.name].lastIndex=0,i[e.name].test(e.value)){if("user_phone"===e.name){const t=e.value.replace(i.noNumber,(e=>"")).length;(t<11||t>14)&&(s=!1)}}else s=!1;s||(t=!1),e.style.boxShadow=s?"":"inset 0 0 0.5em 0.3em rgba(255,0,0,1)"}})),t})(c)?(n.classList.add("working"),r.innerHTML="",u.forEach(((e,t)=>{d[t]=e})),s.forEach((e=>{let t;"name"in e&&"assign"in e&&("select"in e?(t=document.querySelector(e.select))&&(d[e.name]=e.assign in t?t[e.assign]:e.assign):d[e.name]=e.assign)})),(m=d,fetch(e,{method:"POST",body:JSON.stringify(m),headers:{"Content-Type":"multipart/json"}}).then((e=>e.json()))).then((e=>{c.forEach((e=>{e.value="",e.style.boxShadow=""})),window.setTimeout((()=>{n.classList.remove("working"),r.innerHTML=l}),500)})).catch((e=>{window.setTimeout((()=>{n.classList.remove("working"),r.innerHTML=a}),500)}))):r.innerHTML=o})(r)}))}))})("https://jsonplaceholder.typicode.com/posts",{form1:[{name:"form",assign:"form1"}],form2:[{name:"form",assign:"form2"},{name:"total",select:"#total",assign:"textContent"}],form3:[{name:"form",assign:"form3"},{name:"service",select:".service-header-tab.active",assign:"textContent"},{name:"total",select:"#total",assign:"textContent"}]})})();