(()=>{"use strict";const e=({draw:e,duration:t=1e3,timingplane:s="linear"})=>{const n={linear:e=>e,easeOutCubic:e=>1-Math.pow(1-e,3),easeInOutCubic:e=>e<.5?4*e*e*e:1-Math.pow(-2*e+2,3)/2,easeOutQuart:e=>1-Math.pow(1-e,5),aseOutExpo:e=>1===e?1:1-Math.pow(2,-10*e)};s in n||(s="linear");let a=performance.now();requestAnimationFrame((function i(o){let l=(o-a)/t;l>1?l=1:l<0&&(l=0);let r=n[s](l);e(r),l<1&&requestAnimationFrame(i)}))};(e=>{const t=document.getElementById("timer-hours"),s=document.getElementById("timer-minutes"),n=document.getElementById("timer-seconds"),a=setInterval((()=>{let e=(()=>{let e=new Date("31 march 2022 01:15").getTime(),t=(new Date).getTime(),s=Math.max((e-t)/1e3,0);return{timeRemaining:s,hours:Math.floor(s/60/60),minutes:Math.floor(s/60%60),seconds:Math.floor(s%60)}})();t.textContent=e.hours<10?"0"+e.hours:e.hours,s.textContent=("0"+e.minutes).slice(-2),n.textContent=("0"+e.seconds).slice(-2),e.timeRemaining||clearInterval(a)}),1e3)})(),(()=>{const t=document.querySelector(".main-header"),s=document.querySelector("menu"),n=document.querySelector("main header .menu"),a=document.querySelector("body .container").getBoundingClientRect().bottom+window.scrollY,i=(t,s)=>{t.preventDefault();const n=window.scrollY,a=document.querySelector(s).getBoundingClientRect().top;e({duration:1e3,timingplane:"easeOutCubic",draw(e){window.scrollTo(0,n+a*e)}})},o=()=>{window.scrollY>a?(n.style.position="fixed",n.style.top="10px",n.style.right=Math.max(10,window.innerWidth-t.offsetLeft-t.offsetWidth-90)+"px",n.style.zIndex="1",n.style.opacity="0.5",n.style.backgroundColor="var(--dark)",n.style.maxWidth=Math.round(80/window.devicePixelRatio)+"px"):n.style&&(n.style="")};document.querySelector("body").addEventListener("click",(e=>{let t,n=null;e.target.closest(".menu")||e.target.classList.contains("close-btn")||(n=e.target.closest("menu ul>li>a"))||!e.target.closest(".active-menu")&&s.classList.contains("active-menu")?(e.preventDefault(),s.classList.toggle("active-menu")):(t=e.target.closest("main a"))&&i(e,t.getAttribute("href")),n&&i(e,n.getAttribute("href"))})),window.addEventListener("scroll",(e=>{o()})),window.addEventListener("resize",(e=>{o()}))})(),(()=>{const t=document.querySelector(".popup"),s=t.querySelector(".popup-content");document.querySelectorAll(".popup-btn").forEach((n=>{n.addEventListener("click",(n=>{t.style.display="block",window.innerWidth>767&&(e({timingplane:"aseOutExpo",draw(e){s.style.opacity=`${e}`,s.style.left=100-50*e+"%",s.style.transform=`translateX( ${-20*e}rem )`}}),s.style.opacity="")}))})),t.addEventListener("click",(e=>{e.target.closest(".popup-content")&&!e.target.classList.contains("popup-close")||(t.style.display="none")}))})(),((t=100)=>{const s=document.querySelector(".calc-block"),n=s.querySelector(".calc-type"),a=s.querySelector(".calc-square"),i=s.querySelector(".calc-count"),o=s.querySelector(".calc-day"),l=document.getElementById("total"),r=([t,s])=>{e({duration:500,timingplane:"easeInOutCubic",draw(e){l.textContent=t+Math.round(e*(s-t))}})};s.debounce=function(e,t){return s=>{"lastCallTimer"in this&&clearTimeout(this.lastCallTimer),this.lastCallTimer=setTimeout((()=>e(s)),t)}},s.addEventListener("input",(e=>{e.target!==n&&e.target!==a&&e.target!==i&&e.target!==o||(e.target!==n&&(e.target.value=e.target.value.replace(/\D+/g,""),e.target.value=e.target.value.replace(/^0+/g,"")),(()=>{const e=+n.options[n.selectedIndex].value,c=+a.value;let u=0,d=1,m=1;+i.value>1&&(d+=+i.value/10),0==+o.value||(+o.value<5?m=2:+o.value<10&&(m=1.5)),u=Math.round(t*e*c*d*m),+l.textContent!==u&&s.debounce(r,300)([+l.textContent,u])})())}))})(100),(()=>{const e=document.querySelectorAll("form"),t={user_name:/[^а-яё\s]+/gi,user_email:/[^a-z\_\-\@\.\!\~\*\']+/gi,user_phone:/[^\d\-\+\(\)']+/gi,user_message:/[^а-яё\s\d\.\,\;\:\-\?\!\)\(\"]+/gi,rus:/[а-я]/gi,trimSH:/(^[\s\-]+|^)(.*?)(?:([\s\-]+$)|$)/i,multySH:/(\s{2,})|(\-{2,})/g,wordFirst:/((^|\s\-|\s|\-)[а-я])([а-я]*)/gi};e.forEach((e=>{e.addEventListener("input",(e=>{e.target.matches("input")&&e.target.name in t&&(e.target.value=e.target.value.replace(t[e.target.name],""),e.target.style.boxShadow="")})),e.addEventListener("focusout",(e=>{if(e.target.matches("input")){let s=e.target.name,n=e.target.value;"user_name"===s?n=n.replace(t.wordFirst,((e,t,s,n)=>t.toUpperCase()+n.toLowerCase())):"user_email"===s&&(n=n.replace(t.rus,(e=>""))),n=n.replace(t.trimSH,((e,t,s)=>`${s}`)),n=n.replace(t.multySH,((e,t,s)=>(t?" ":"")+(s?"-":""))),e.target.value=n}}))}))})(),(()=>{const e=document.querySelector(".service-header"),t=document.querySelectorAll(".service-header-tab"),s=document.querySelectorAll(".service-tab");e.addEventListener("click",(e=>{var n;e.target.closest(".service-header-tab")&&(n=e.target.closest(".service-header-tab"),t.forEach(((e,t)=>{e===n?(e.classList.add("active"),s[t].classList.remove("d-none")):(e.classList.remove("active"),s[t].classList.add("d-none"))})))}))})(),((e,t=1500)=>{const s={slide:"slide-default",slideActive:"slide-active-default",switch:"switch-defult",switchActive:"switch-active-default",get switchOrButton(){return`.${this.switch}`+("button"in this?`, .${this.button}`:"")}};let n="";for(let t in e)s[t]=e[t];if("slider"in s||(n+="init:slider не указан \n"),n)return n;const a=document.querySelector(`.${s.slider}`);if(a?"UL"!==a.nodeName&&(n+=`тег <${a.nodeName.toLowerCase()}>не приемлем для инициализации слайдера, используйте тег <ul>\n`):n+=`тег инициализации слайдера <ul class="${s.slider}"></ul> не найден\n`,n)return n;const i=a.querySelectorAll("li");if(i.length?i.forEach((e=>{e.classList.contains(s.slide)||("slide-default"===s.slide?(e.classList.add(s.slide),e.style.opacity="0",e.style.position="absolute"):n+=`класс "${s.slide}" не объявлен для слайда <li class="${e.classList}">\n`)})):n+=`теги инициализации слайдов <li class="${s.slide}"></li> не найдены\n`,n)return n;a.querySelector(`.${s.button}.${s.buttonPrev}`),a.querySelector(`.${s.button}.${s.buttonNext}`),t=t<=0?0:t<1e3?1e3:t;let o,l=0;const r=(()=>{const e=[],t=document.createElement("li");t.classList.add(s.switch),"switch-defult"===s.switch&&(t.style.display="inline-block",t.style.width="2rem",t.style.height="2rem",t.style.marginLeft="1rem",t.style.backgroundColor="white",t.style.cursor="pointer",t.style.borderRadius="50%"),"switch-active-default"===s.switchActive&&(t.style.outlineWidth="0.3rem",t.style.outlineStyle="solid",t.style.outlineColor="white");const n=document.createElement("ul");"switchList"in s&&n.classList.add(s.switchList);for(let s=0;s<i.length;s++)e.push(t.cloneNode()),n.append(e[s]);return e[0].classList.add(s.switchActive),a.append(n),e})(),c=e=>{i[e].classList.remove(s.slideActive),"slide-active-default"===s.slideActive&&(i[e].style.opacity="0"),r[e].classList.remove(s.switchActive),"switch-active-default"===s.switchActive&&(r[e].style.outlineColor="white")},u=e=>{i[e].classList.add(s.slideActive),"slide-active-default"===s.slideActive&&(i[e].style.opacity="1"),r[e].classList.add(s.switchActive),"switch-active-default"===s.switchActive&&(r[e].style.outlineColor="blue")},d=()=>{c(l),l++,l>=i.length&&(l=0),u(l)},m=e=>{o=setInterval(d,e)};a.addEventListener("click",(e=>{e.target.matches(s.switchOrButton)&&(e.preventDefault(),c(l),e.target.classList.contains(s.buttonNext)?++l>=i.length&&(l=0):e.target.classList.contains(s.buttonPrev)?--l<0&&(l=i.length-1):e.target.classList.contains(s.switch)&&r.forEach(((t,s)=>{e.target===t&&(l=s)})),u(l))})),a.addEventListener("mouseenter",(e=>{t&&e.target.matches(s.switchOrButton)&&clearInterval(o)}),!0),a.addEventListener("mouseleave",(e=>{t&&e.target.matches(s.switchOrButton)&&m(t)}),!0),t&&m(t)})({slider:"portfolio-content",slide:"portfolio-item",slideActive:"portfolio-item-active",button:"portfolio-btn",buttonPrev:"prev",buttonNext:"next",switchList:"portfolio-dots",switch:"dot",switchActive:"dot-active"},2e3),((e,t={})=>{const s=document.querySelectorAll("form"),n=document.querySelector(".preloader"),a={user_name:/..+/g,user_email:/.+/,user_phone:/(^\+\d|^\d)(([\d\-]+[\(]\d+[\)][\d\-]+$)|([\d\-]+$))/,user_message:/.+/,noNumber:/[^\d]+/g},i="Технический сбой. Заявка&nbsp;не&nbsp;отправлена",o="Спасибо! Наш менеджер с Вами свяжется",l="Ошибочные данные. Заявка&nbsp;не&nbsp;отправлена.";s.forEach((s=>{const r=document.createElement("div");r.classList.add("status-block"),r.style.color="white",s.append(r),s.addEventListener("submit",(s=>{s.preventDefault();const r={form:s.currentTarget};s.target.id in t&&(r.optional=t[s.target.id]),(({form:t,optional:s=[]})=>{const r=t.querySelector(".status-block"),c=t.querySelectorAll("input"),u=new FormData(t),d={};var m;(e=>{let t=!0;return e.forEach((e=>{let s=!0;if(e.name){if(e.name in a)if(a[e.name].lastIndex=0,a[e.name].test(e.value)){if("user_phone"===e.name){const t=e.value.replace(a.noNumber,(e=>"")).length;(t<11||t>14)&&(s=!1)}}else s=!1;s||(t=!1),e.style.boxShadow=s?"":"inset 0 0 0.5em 0.3em rgba(255,0,0,1)"}})),t})(c)?(n.classList.add("working"),r.innerHTML="",u.forEach(((e,t)=>{d[t]=e})),s.forEach((e=>{let t;"name"in e&&"assign"in e&&("select"in e?(t=document.querySelector(e.select))&&(d[e.name]=e.assign in t?t[e.assign]:e.assign):d[e.name]=e.assign)})),(m=d,fetch(e,{method:"POST",body:JSON.stringify(m),headers:{"Content-Type":"multipart/json"}}).then((e=>e.json()))).then((e=>{c.forEach((e=>{e.value="",e.style.boxShadow=""})),window.setTimeout((()=>{n.classList.remove("working"),r.innerHTML=o}),500)})).catch((e=>{window.setTimeout((()=>{n.classList.remove("working"),r.innerHTML=i}),500)}))):r.innerHTML=l})(r)}))}))})("https://jsonplaceholder.typicode.com/posts",{form1:[{name:"form",assign:"form1"},{name:"total",select:"#total",assign:"textContent"}],form2:[{name:"form",assign:"form2"},{name:"total",select:"#total",assign:"textContent"}],form3:[{name:"form",assign:"form3"},{name:"service",select:".service-header-tab.active",assign:"textContent"},{name:"total",select:"#total",assign:"textContent"}]})})();